<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Design Your Treat | Print-a-Treat Creation</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Google Fonts: Inter -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>

    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #F8F7F5;
        }
        .gradient-text {
            background: linear-gradient(to right, #ec4899, #8b5cf6);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        .step {
            display: none;
        }
        .step.active {
            display: block;
        }
        .option-card {
            transition: all 0.2s ease-in-out;
            cursor: pointer;
        }
        .option-card.selected {
            border-color: #ec4899;
            box-shadow: 0 0 0 3px rgba(236, 72, 153, 0.3);
            transform: translateY(-4px);
        }
        .progress-bar-fill {
            transition: width 0.5s ease-in-out;
        }
    </style>
</head>
<body class="text-gray-800">

    <!-- Header -->
    <header class="bg-white/80 backdrop-blur-lg sticky top-0 z-50 shadow-sm">
        <nav class="container mx-auto px-6 py-4 flex justify-between items-center">
            <a href="index.html" class="text-2xl font-bold text-gray-800">
                Print-a-Treat <span class="text-pink-500">Creation</span>
            </a>
            <div class="hidden md:flex items-center space-x-6">
                <a href="index.html" class="hover:text-pink-500 transition-colors">Home</a>
                <a href="products.html" class="hover:text-pink-500 transition-colors">Gallery</a>
                <a href="about.html" class="hover:text-pink-500 transition-colors">Our Story</a>
                <a href="workshops.html" class="hover:text-pink-500 transition-colors">Workshops</a>
                <a href="contact.html" class="hover:text-pink-500 transition-colors">Contact</a>
            </div>
            <a href="customize.html" class="hidden md:block bg-pink-500 text-white font-semibold px-5 py-2 rounded-lg hover:bg-pink-600 transition-all shadow-md hover:shadow-lg">
                Design Your Treat
            </a>
            <button id="mobile-menu-button" class="md:hidden">
                 <i data-lucide="menu" class="w-6 h-6"></i>
            </button>
        </nav>
        <!-- Mobile Menu -->
        <div id="mobile-menu" class="hidden md:hidden px-6 pb-4">
             <a href="index.html" class="block py-2 hover:text-pink-500 transition-colors">Home</a>
             <a href="products.html" class="block py-2 hover:text-pink-500 transition-colors">Gallery</a>
             <a href="about.html" class="block py-2 hover:text-pink-500 transition-colors">Our Story</a>
             <a href="workshops.html" class="block py-2 hover:text-pink-500 transition-colors">Workshops</a>
             <a href="contact.html" class="block py-2 hover:text-pink-500 transition-colors">Contact</a>
             <a href="customize.html" class="block mt-2 bg-pink-500 text-white text-center font-semibold px-5 py-2 rounded-lg hover:bg-pink-600 transition-all">Design Your Treat</a>
        </div>
    </header>

    <main class="container mx-auto px-6 py-12">
        <!-- Page Header -->
        <div class="text-center mb-10">
            <h1 class="text-4xl md:text-5xl font-extrabold mb-2">Create Your <span class="gradient-text">Masterpiece</span></h1>
            <p class="text-lg text-gray-600 max-w-3xl mx-auto">Follow the steps below to design your custom 3D-printed dessert.</p>
        </div>

        <!-- Main Customizer Layout -->
        <div class="grid lg:grid-cols-3 gap-8">

            <!-- Left: Step-by-step form -->
            <div class="lg:col-span-2 bg-white p-8 rounded-2xl shadow-lg">
                <!-- Progress Bar -->
                <div class="mb-8">
                    <div class="flex justify-between mb-1">
                        <span class="text-base font-medium text-pink-700">Design Progress</span>
                        <span id="progress-text" class="text-sm font-medium text-pink-700">Step 1 of 5</span>
                    </div>
                    <div class="w-full bg-gray-200 rounded-full h-2.5">
                        <div id="progress-bar" class="bg-pink-500 h-2.5 rounded-full progress-bar-fill" style="width: 20%"></div>
                    </div>
                </div>
                
                <form id="customizer-form">
                    <!-- Step 1: Choose Type -->
                    <div id="step-1" class="step active">
                        <h2 class="text-2xl font-bold mb-6">Step 1: What are we creating?</h2>
                        <div class="grid sm:grid-cols-2 gap-6" data-step="1" data-key="type">
                            <div class="option-card border-2 border-gray-200 rounded-lg p-6 text-center" data-value="Cake" data-price="50">
                                <i data-lucide="cake-slice" class="w-16 h-16 mx-auto text-purple-500 mb-4"></i>
                                <h3 class="text-xl font-semibold">Cake</h3>
                                <p class="text-sm text-gray-500">The perfect centerpiece for any celebration.</p>
                            </div>
                            <div class="option-card border-2 border-gray-200 rounded-lg p-6 text-center" data-value="Pastries" data-price="8">
                                <i data-lucide="cookie" class="w-16 h-16 mx-auto text-purple-500 mb-4"></i>
                                <h3 class="text-xl font-semibold">Individual Pastries</h3>
                                <p class="text-sm text-gray-500">Perfect for events or personal treats (per piece).</p>
                            </div>
                        </div>
                    </div>

                    <!-- Step 2: Choose Size -->
                    <div id="step-2" class="step">
                        <h2 class="text-2xl font-bold mb-6">Step 2: Choose a Size</h2>
                        <div class="grid sm:grid-cols-3 gap-6" data-step="2" data-key="size">
                             <div class="option-card border-2 border-gray-200 rounded-lg p-6 text-center" data-value="Small" data-price="0">
                                <h3 class="text-xl font-semibold">Small</h3>
                                <p class="text-gray-500 text-sm">(Serves 4-6)</p>
                            </div>
                             <div class="option-card border-2 border-gray-200 rounded-lg p-6 text-center" data-value="Medium" data-price="25">
                                <h3 class="text-xl font-semibold">Medium</h3>
                                <p class="text-gray-500 text-sm">(Serves 8-12)</p>
                            </div>
                             <div class="option-card border-2 border-gray-200 rounded-lg p-6 text-center" data-value="Large" data-price="60">
                                <h3 class="text-xl font-semibold">Large</h3>
                                <p class="text-gray-500 text-sm">(Serves 15-20)</p>
                            </div>
                        </div>
                    </div>

                    <!-- Step 3: Choose Flavor -->
                    <div id="step-3" class="step">
                        <h2 class="text-2xl font-bold mb-6">Step 3: Select a Flavor</h2>
                         <div class="grid sm:grid-cols-2 md:grid-cols-3 gap-6" data-step="3" data-key="flavor">
                             <div class="option-card border-2 border-gray-200 rounded-lg p-4 text-center" data-value="Vanilla Bean" data-price="0">
                                <h3 class="text-lg font-semibold">Vanilla Bean</h3>
                            </div>
                             <div class="option-card border-2 border-gray-200 rounded-lg p-4 text-center" data-value="Chocolate Fudge" data-price="5">
                                <h3 class="text-lg font-semibold">Chocolate Fudge</h3>
                            </div>
                             <div class="option-card border-2 border-gray-200 rounded-lg p-4 text-center" data-value="Red Velvet" data-price="5">
                                <h3 class="text-lg font-semibold">Red Velvet</h3>
                            </div>
                            <div class="option-card border-2 border-gray-200 rounded-lg p-4 text-center" data-value="Lemon Zest" data-price="0">
                                <h3 class="text-lg font-semibold">Lemon Zest</h3>
                            </div>
                             <div class="option-card border-2 border-gray-200 rounded-lg p-4 text-center" data-value="Strawberry Cream" data-price="5">
                                <h3 class="text-lg font-semibold">Strawberry Cream</h3>
                            </div>
                             <div class="option-card border-2 border-gray-200 rounded-lg p-4 text-center" data-value="Allergen-Free" data-price="15">
                                <h3 class="text-lg font-semibold">Custom Allergen-Free</h3>
                            </div>
                        </div>
                    </div>

                    <!-- Step 4: Design & Shape -->
                    <div id="step-4" class="step">
                        <h2 class="text-2xl font-bold mb-6">Step 4: Design Your Creation</h2>
                        <div class="space-y-6" data-step="4" data-key="design">
                            <div>
                                <h3 class="text-lg font-semibold mb-2">A) Choose a Base Shape</h3>
                                <div class="grid grid-cols-2 sm:grid-cols-4 gap-4">
                                    <div class="option-card border-2 border-gray-200 rounded-lg p-4 text-center" data-value="Round" data-price="0">Round</div>
                                    <div class="option-card border-2 border-gray-200 rounded-lg p-4 text-center" data-value="Square" data-price="0">Square</div>
                                    <div class="option-card border-2 border-gray-200 rounded-lg p-4 text-center" data-value="Heart" data-price="10">Heart</div>
                                    <div class="option-card border-2 border-gray-200 rounded-lg p-4 text-center" data-value="Geometric" data-price="20">Geometric</div>
                                </div>
                            </div>
                            <div>
                               <h3 class="text-lg font-semibold mb-2">B) Upload a Custom Logo or Image (Optional)</h3>
                               <p class="text-sm text-gray-500 mb-2">For corporate logos, monograms, or special images. Adds intricacy and cost.</p>
                               <input type="file" id="file-upload" class="block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-pink-50 file:text-pink-700 hover:file:bg-pink-100"/>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Step 5: Final Details -->
                     <div id="step-5" class="step">
                        <h2 class="text-2xl font-bold mb-6">Step 5: Final Details & Review</h2>
                        <div class="space-y-6">
                            <div>
                                <label for="special-instructions" class="block text-sm font-medium text-gray-700">Special Instructions</label>
                                <textarea name="special-instructions" id="special-instructions" rows="4" class="mt-1 block w-full px-4 py-3 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-pink-500 focus:border-pink-500" placeholder="e.g., 'Happy Birthday, Sarah!', specific colors, etc."></textarea>
                            </div>
                            <div>
                                <label for="delivery-date" class="block text-sm font-medium text-gray-700">Requested Pickup/Delivery Date</label>
                                <input type="date" id="delivery-date" name="delivery-date" class="mt-1 block w-full px-4 py-3 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-pink-500 focus:border-pink-500">
                            </div>
                        </div>
                    </div>

                    <!-- Navigation -->
                    <div class="mt-10 flex justify-between">
                        <button type="button" id="prev-btn" class="bg-gray-200 text-gray-700 font-semibold px-6 py-2 rounded-lg hover:bg-gray-300 transition-all hidden">Previous</button>
                        <button type="button" id="next-btn" class="bg-pink-500 text-white font-semibold px-6 py-2 rounded-lg hover:bg-pink-600 transition-all ml-auto">Next</button>
                    </div>
                </form>
            </div>

            <!-- Right: Summary -->
            <div class="lg:col-span-1">
                 <div class="bg-white p-8 rounded-2xl shadow-lg sticky top-28">
                     <h2 class="text-2xl font-bold mb-6 border-b pb-4">Your Custom Creation</h2>
                     <div class="space-y-4">
                        <div>
                            <h3 class="font-semibold text-gray-500">Type</h3>
                            <p id="summary-type" class="font-bold text-lg text-purple-600">Not selected</p>
                        </div>
                         <div>
                            <h3 class="font-semibold text-gray-500">Size</h3>
                            <p id="summary-size" class="font-bold text-lg text-purple-600">Not selected</p>
                        </div>
                         <div>
                            <h3 class="font-semibold text-gray-500">Flavor</h3>
                            <p id="summary-flavor" class="font-bold text-lg text-purple-600">Not selected</p>
                        </div>
                         <div>
                            <h3 class="font-semibold text-gray-500">Design</h3>
                            <p id="summary-design" class="font-bold text-lg text-purple-600">Not selected</p>
                        </div>
                     </div>
                     <div class="mt-8 border-t pt-4">
                        <p class="text-sm text-gray-500">Price is an estimate and may vary based on design complexity.</p>
                        <div class="flex justify-between items-center mt-2">
                             <span class="text-xl font-medium">Estimated Total:</span>
                             <span id="summary-price" class="text-3xl font-bold gradient-text">$0.00</span>
                        </div>
                     </div>
                     <button type="submit" form="customizer-form" class="mt-6 w-full bg-purple-600 text-white font-bold text-lg px-6 py-3 rounded-lg hover:bg-purple-700 transition-all shadow-lg">Add to Cart</button>
                 </div>
            </div>
        </div>
    </main>
    
    <script>
        // --- DOM ELEMENTS ---
        const prevBtn = document.getElementById('prev-btn');
        const nextBtn = document.getElementById('next-btn');
        const steps = Array.from(document.querySelectorAll('.step'));
        const progressBar = document.getElementById('progress-bar');
        const progressText = document.getElementById('progress-text');
        const form = document.getElementById('customizer-form');

        // --- STATE ---
        let currentStep = 1;
        const totalSteps = steps.length;
        const selections = {
            type: null,
            size: null,
            flavor: null,
            design: null,
        };
        const prices = {
            base: 0,
            size: 0,
            flavor: 0,
            design: 0,
            upload: 0
        };

        // --- FUNCTIONS ---
        function updateUI() {
            // Update step visibility
            steps.forEach((step, index) => {
                step.classList.toggle('active', index + 1 === currentStep);
            });

            // Update progress bar
            const progress = ((currentStep - 1) / (totalSteps -1)) * 100;
            progressBar.style.width = `${progress}%`;
            progressText.textContent = `Step ${currentStep} of ${totalSteps}`;

            // Update buttons
            prevBtn.classList.toggle('hidden', currentStep === 1);
            nextBtn.textContent = currentStep === totalSteps ? 'Review Order' : 'Next';
            if (currentStep === totalSteps) {
                // On the last step, the main action is the submit button
                 nextBtn.classList.add('hidden');
            } else {
                 nextBtn.classList.remove('hidden');
            }
        }
        
        function updateSummary() {
            document.getElementById('summary-type').textContent = selections.type || 'Not selected';
            document.getElementById('summary-size').textContent = selections.size || 'Not selected';
            document.getElementById('summary-flavor').textContent = selections.flavor || 'Not selected';
            document.getElementById('summary-design').textContent = selections.design || 'Not selected';
            
            const total = Object.values(prices).reduce((sum, price) => sum + price, 0);
            document.getElementById('summary-price').textContent = `$${total.toFixed(2)}`;
        }

        function handleSelection(event) {
            const selectedCard = event.currentTarget;
            const stepContainer = selectedCard.closest('[data-step]');
            const step = stepContainer.dataset.step;
            const key = stepContainer.dataset.key;
            
            // Handle single selections per step
            const options = stepContainer.querySelectorAll('.option-card');
            options.forEach(opt => opt.classList.remove('selected'));
            selectedCard.classList.add('selected');

            selections[key] = selectedCard.dataset.value;
            
            if(key === 'type') {
                 prices.base = parseFloat(selectedCard.dataset.price);
            } else {
                 prices[key] = parseFloat(selectedCard.dataset.price);
            }
            updateSummary();
        }

        // --- EVENT LISTENERS ---
        nextBtn.addEventListener('click', () => {
            if (currentStep < totalSteps) {
                currentStep++;
                updateUI();
            }
        });

        prevBtn.addEventListener('click', () => {
            if (currentStep > 1) {
                currentStep--;
                updateUI();
            }
        });

        document.querySelectorAll('.option-card').forEach(card => {
            card.addEventListener('click', handleSelection);
        });
        
        document.getElementById('file-upload').addEventListener('change', function() {
            if (this.files.length > 0) {
                prices.upload = 25; // Add a flat fee for file uploads
                document.getElementById('summary-design').textContent += ' + Custom Upload';
            } else {
                prices.upload = 0;
            }
            updateSummary();
        });

        form.addEventListener('submit', (e) => {
            e.preventDefault();
            // In a real Shopify site, this would serialize the form data
            // and add the product to the cart.
            const finalData = { ...selections };
            finalData.specialInstructions = document.getElementById('special-instructions').value;
            finalData.deliveryDate = document.getElementById('delivery-date').value;
            finalData.estimatedPrice = document.getElementById('summary-price').textContent;
            
            console.log('Order Submitted:', finalData);
            alert('Thank you! Your design has been added to your cart.');
        });


        // --- INITIALIZATION ---
        lucide.createIcons();
        updateUI();
        updateSummary();
    </script>
</body>
</html>
